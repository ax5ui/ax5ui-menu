"use strict";!function(t,e){var i=ax5.util,n=function(){var t,n=this;e&&e.call(this),this.config={theme:"default",iconWidth:20,acceleratorWidth:100,direction:"top-left",animateTime:250,items:[]},this.openTimer=null,this.closeTimer=null,this.queue=[],t=this.config,this.init=function(){n.menuId=ax5.getGuid()},this.__getTmpl=function(){return'\n            <div class="ax5-ui-menu {{theme}}">\n                <div class="ax-menu-body">\n                    {{#items}}\n                    <div class="ax-menu-item" data-menu-item-depth="{{@depth}}" data-menu-item-index="{{@i}}">\n                        <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{icon}}}</span>\n                        <span class="ax-menu-item-cell ax-menu-item-label">{{{label}}}</span>\n                        {{#accelerator}}\n                        <span class="ax-menu-item-cell ax-menu-item-accelerator" style="width:{{cfg.acceleratorWidth}}px;"><span class="item-wrap">{{.}}</span></span>\n                        {{/accelerator}}\n                        {{#@hasChild}}\n                        <span class="ax-menu-item-cell ax-menu-item-handle">{{{cfg.icons.arrow}}}</span>\n                        {{/@hasChild}}\n                    </div>\n                    {{/items}}\n                </div>\n                <div class="ax-menu-arrow"></div>\n            </div>\n            '},this.__popup=function(e,i,a){var s,c=e;c.theme=e.theme||t.theme,c.cfg={icons:jQuery.extend({},t.icons),iconWidth:e.iconWidth||t.iconWidth,acceleratorWidth:e.acceleratorWidth||t.acceleratorWidth},c.items=i,c["@depth"]=a,c["@hasChild"]=function(){return this.items&&this.items.length>0},s=jQuery(ax5.mustache.render(this.__getTmpl(),c)),jQuery(document.body).append(s);var u=this.queue.splice(a);return u.forEach(function(t){t.$target.remove()}),this.queue.push({$target:s}),s.find("[data-menu-item-index]").bind("mouseover",function(){var t=this.getAttribute("data-menu-item-depth"),a=this.getAttribute("data-menu-item-index");if(s.attr("data-selected-menu-item-index")!=a)if(s.attr("data-selected-menu-item-index",a),i[a].items&&i[a].items.length>0){var c=$(this),u=c.offset(),r={left:u.left+c.width()-2,top:u.top};r=jQuery.extend(!0,e,r),n.__popup(r,i[a].items,t+1)}else n.queue.splice(Number(t)+1).forEach(function(t){t.$target.remove()})}),this.__align(s,c),this},this.__align=function(t,e){return t.css({left:e.left,top:e.top}),this},this.popup=function(){var e={event:function(e,i){return e={left:e.clientX,top:e.clientY,width:t.width,theme:t.theme,direction:t.direction},i=jQuery.extend(!0,e,i)},object:function(e,i){return e={left:e.left,top:e.top,width:e.width||t.width,theme:e.theme||t.theme,direction:e.direction||t.direction},i=jQuery.extend(!0,e,i)}};return function(i,n){return i?(n=e["undefined"==typeof i.clientX?"object":"event"].call(this,i,n),this.__popup(n,t.items,0),this):this}}(),this.close=function(){return this},this.main=function(){arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};t.menu=function(){return i.isFunction(e)&&(n.prototype=new e),n}()}(ax5.ui,ax5.ui.root);